# ~/.tmux.conf

# General Settings
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
set -g focus-events on
set -g default-shell "$SHELL"

# Mouse Support
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

# Automatically set window title to current directory name
set -g set-titles on
set -g set-titles-string "#{pane_current_path}"

# Set window name to current directory basename
set -g status-interval 5
set -g automatic-rename on

# Reload config
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes using | and -
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# Pane navigation
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Window management
bind -r < swap-window -d -t -1
bind -r > swap-window -d -t +1

# Quick window selection
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Plugins (requires tpm - https://github.com/tmux-plugins/tpm)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'christoomey/vim-tmux-navigator'

# One Dark Color Scheme
# Primary colors
set -g status-style "bg=#282c34,fg=#abb2bf"  # normal black / primary foreground
set -g pane-border-style "fg=#5c6370"         # bright black
set -g pane-active-border-style "fg=#56b6c2"  # cyan

# Window status
set -g window-status-separator ""

# Status bar
set -g status-position top
set -g status-justify centre

# Left status (session name)
set -g status-left-length 100
set -g status-left-style "bold"

# Right status
set -g status-right-style "bold"


# Simpler status bar alternative
#set -g window-status-format "#[fg=#5c6370,bg=#282c34] #I:#{b:pane_current_path} "
#set -g window-status-current-format "#[fg=#61afef,bg=#282c34] #I:#{b:pane_current_path} "
set -g status-right ""
set -g status-left "#[fg=#98c379]#[fg=#282c34,bg=#98c379] #S #[fg=#98c379,bg=#282c34]"



# set -g status-left "#[fg=#98c379]#[fg=#282c34,bg=#98c379] #S #[fg=#98c379,bg=#282c34]"
# set -g status-right "#[fg=#c678dd]#[fg=#282c34,bg=#c678dd] %H:%M #[fg=#e5c07b,bg=#c678dd]#[fg=#282c34,bg=#e5c07b] %d-%b #[fg=#282c34]"
set -g window-status-format "#[fg=#5c6370] #I:#{b:pane_current_path} "
set -g window-status-current-format "#[fg=#61afef]#[fg=#282c34,bg=#61afef] #{?#{m:^((ba|z|fi|nu|tc|k|dash)sh)$,#{pane_current_command}},#{pane_current_path},#{pane_current_command}} #[fg=#61afef,bg=#282c34]"


#set -g automatic-rename-format '#{?#{m:^((ba|z|fi|nu|tc|k|dash)sh)$,#{pane_current_command}},#{pane_current_path},#{pane_current_command}}'

#set -g automatic-rename-format '#{b:pane_current_path}'
#set -g automatic-rename-format "#{pane_current_command}"
#set -g automatic-rename-format '#{?#{==:#{pane_current_command},bash},#{b:pane_current_path},#{pane_current_command}}'


# Message style (command line at bottom)
set -g message-style "bg=#e5c07b,fg=#282c34"  # yellow

# Mode style (when in copy mode)
set -g mode-style "bg=#61afef,fg=#282c34"     # blue

# Clock mode
set -g clock-mode-colour "#56b6c2"            # cyan

# Selection style (for copy mode)
set -g copy-mode-match-style "bg=#e5c07b,fg=#282c34"  # yellow
set -g copy-mode-current-match-style "bg=#98c379,fg=#282c34"  # green



set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Resurrect settings
set -g @resurrect-save 'C-s'          # Change save key
set -g @resurrect-restore 'C-r'       # Change restore key
set -g @resurrect-capture-pane-contents 'on'  # Save pane contents
set -g @resurrect-strategy-vim 'session'      # Vim session restore

# Continuum settings
set -g @continuum-restore 'on'        # Restore on tmux start
set -g @continuum-save-interval '15'  # Auto-save every 15 minutes
set -g @continuum-boot 'on'           # Start tmux on system boot (optional)
set -g @continuum-boot-options 'iterm' # Options for auto-start


# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

